var AppRouter=Backbone.Router.extend({routes:{contact:"contactRoute",about:"aboutRoute","work/:project_id":"workIdRoute","work*":"workRoute","*actions":"defaultRoute"},defaultRoute:function(){appRouter.navigate("/work",{trigger:!0,replace:!0})},workRoute:function(){INITIALIZED?slideProjects(0):initializeWork(0);initTopNavLinks("work");CURRENT_ROUTE="work"},workIdRoute:function(a){var b=_.where(PROJECT_ARR,{title:a});0<b.length&&(a=b[0].id);1<=a&&a<=NUM_PROJECTS?(INITIALIZED?slideProjects(a):initializeWork(a),
initTopNavLinks("work")):appRouter.navigate("/work",{trigger:!0,replace:!0});CURRENT_ROUTE="work"},aboutRoute:function(){INITIALIZED?slideProjects(NUM_PROJECTS+1):initializeWork(NUM_PROJECTS+1);initTopNavLinks("about");CURRENT_ROUTE="about"},contactRoute:function(){INITIALIZED?slideProjects(NUM_PROJECTS+2):initializeWork(NUM_PROJECTS+2);initTopNavLinks("contact");CURRENT_ROUTE="contact"}}),appRouter;
function loadingScreenInit(){var a=0,b=$(".slideWrapper .projectContentWrapper img").length;$(".slideWrapper .projectContentWrapper img").each(function(){$(this).attr("src",$(this).attr("rel"));$(this).load(function(){var c=$(this);a++;var d=Math.round(100*(a/b));$("#loadingText").html(d);$("#loadImgBG").stop().animate({height:d+"%"},"slow",function(){100==d&&($("header").css("display","block"),$(".superWrapper").css("display","block"),$("footer").css("display","block"),fixHeight(),$(window).resize(),
$("#loadingScreen").animate({left:"-100%"},"slow",function(){$("#loadingScreen").remove();$("html").css("background","")}),console.log("DONE LOADING!!!"))});console.log(c);console.log(a)});$(this).error(function(){console.log("ERROR!!!!:");console.log($(this))})})}function loadProjectImages(a){var b=0;PROJECT_IMG_LOADED[a-1]||$(".activeSlide .projectContentWrapper img").each(function(){0!=b&&$(this).attr("src",$(this).attr("rel"));b++});PROJECT_IMG_LOADED[a-1]=!0}
function letImagesLoad(a){fixHeight();a.each(function(){$(this).load(function(){fixHeight()})})}function fixHeight(){$("#wrapper").animate({height:$(".activeSlide").outerHeight()+"px"},{queue:!1,duration:600});console.log("Fixing height!!!")}
function slideProjects(a,b){CURRENT_SLIDE=parseInt(a);var c=$("#wrapper"),d=-100*a,e=d+"%",h=parseFloat(c.css("left")),f=Math.round(100*(parseFloat(c.css("left"))/parseFloat($(".superWrapper").css("width")))),g=(Math.abs(d-f)-100)/1E3+1;$("body,html,document").scrollTop(0);$(".activeSlide").outerHeight();$(".activeSlide").removeClass("activeSlide");var j=$(".slideWrapper")[a];$(j).addClass("activeSlide");INITIALIZED?(f<d?MOBILE?(c.css("left",e),0<a&&a<=NUM_PROJECTS&&loadProjectImages(a)):(d-=Math.abs((d-
f)*(1/3)),c.animate({left:h-50+"px"},250).delay(100).animate({left:d+"%"},200*g).delay(1).animate({left:e},700*g,"easeOutBack",function(){})):f>d&&(MOBILE?(c.css("left",e),0<a&&a<=NUM_PROJECTS&&loadProjectImages(a)):b?c.animate({left:e},400,"easeOutBack"):(d+=Math.abs((d-f)*(1/3)),c.animate({left:h+50+"px"},250).delay(100).animate({left:d+"%"},200*g).delay(1).animate({left:e},700*g,"easeOutBack",function(){}))),0<a&&a<=NUM_PROJECTS&&loadProjectImages(a),letImagesLoad($(".activeSlide img"))):c.css("left",
e)}function initializeWork(a){START_ID=a;getProject(0)}
function getProject(a){var b,c;0==a?(b="/work.html",c=".workSlide"):a==NUM_PROJECTS+1?(b="/about.html",c=".aboutSlide"):a==NUM_PROJECTS+2&&(b="/contact.html",c=".contactSlide");if(0==a)_.templateSettings.variable="work",b=_.template($("script.work_template").html()),HTML_PAGES[a]=b(PROJECT_ARR),a++,getProject(a);else if(a<=NUM_PROJECTS&&0!=a){_.templateSettings.variable="proj";b=_.template($("script.project_template").html());var d=new Project(PROJECT_ARR[a-1]);HTML_PAGES[a]=b(d);a++;getProject(a)}else $.get(b,
function(b){HTML_PAGES[a]=b;a++;if(a<=NUM_PROJECTS+2)getProject(a);else{for(var d in HTML_PAGES)$("#wrapper").append(HTML_PAGES[d]);$("#wrapper").append($("#blankHtml").html());$("#wrapper").append($("#blankHtml").html());$("#wrapper").append('<div style="clear:both;"></div>');0==START_ID?(c=".workSlide",b="work"):START_ID==NUM_PROJECTS+1?(c=".aboutSlide",b="about"):START_ID==NUM_PROJECTS+2?(b="contact",c=".contactSlide"):(c=".project_"+PROJECT_ARR[START_ID-1].title,b="work");$(c).addClass("activeSlide");
$("#wrapper").css("width",WRAPPER_WIDTH);slideProjects(START_ID);setupWork();initTopNavLinks(b);0<START_ID&&START_ID<=NUM_PROJECTS&&loadProjectImages(START_ID);INITIALIZED=!0;letImagesLoad($(".activeSlide img"));setTimeout(responsiveHeader,100);setTimeout(resizeSlides,200)}})}function resizeSlidesAbs(){var a=$("#wrapper").outerWidth()/(NUM_PROJECTS+5);$(".slideWrapper").each(function(){$(this).css("width",a+"px")})}
function resizeSlides(){$(".slideWrapper").each(function(){$(this).css("width",SLIDE_DIV_WIDTH)})}
function initSocialButtons(){var a,b=document.getElementsByTagName("script")[0];document.getElementById("facebook-jssdk")||(a=document.createElement("script"),a.id="facebook-jssdk",a.src="//connect.facebook.net/en_US/all.js#xfbml=1",b.parentNode.insertBefore(a,b));var b=document.getElementsByTagName("script")[0],c=/^http:/.test(document.location)?"http":"https";document.getElementById("twitter-wjs")||(a=document.createElement("script"),a.id="twitter-wjs",a.src=c+"://platform.twitter.com/widgets.js",
b.parentNode.insertBefore(a,b));!0}function setupWork(){resizeSlidesAbs();setupWorkLightBox();initProjectNav();initContactIcons();initDLResume();initSocialButtons();505>$(window).width()?changeRows505():980>$(window).width()?changeRows980():changeRowsDefault()};